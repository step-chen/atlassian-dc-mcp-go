services:
  mcp-server:
    image: ${IMAGE_NAME:-ghcr.io/step-chen/atlassian-dc-mcp-go}:latest
    container_name: atlassian-dc-mcp
    # Mount the local config file into the container
    volumes:
      - ./config.yaml:/app/config.yaml:ro
    # Expose ports only within the Docker network
    expose:
      - "${MCP_PORT:-8090}"
    # Environment variables
    environment:
      - MCP_PORT=${MCP_PORT:-8090}
    # Healthcheck to ensure the application is running correctly
    healthcheck:
      test: ["CMD", "./healthcheck"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 15s
    # Restart policy
    restart: on-failure
    networks:
      - mcp-network