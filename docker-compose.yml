version: '3.8'

services:
  mcp-server:
    image: ${IMAGE_NAME:-atlassian-dc-mcp-go}:latest
    # Build the image from the Dockerfile in the current directory
    build: .
    container_name: atlassian-dc-mcp
    # Mount the local config file into the container
    volumes:
      - ./config.yaml:/app/config.yaml:ro
      - ./.env:/app/.env:ro
    # Expose ports (only relevant for HTTP mode)
    ports:
      - "${MCP_PORT:-8090}:${MCP_PORT:-8090}"
    # Environment variables
    environment:
      - MCP_PORT=${MCP_PORT:-8090}
    # Restart policy
    restart: unless-stopped