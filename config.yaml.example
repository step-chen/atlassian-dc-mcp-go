# Example configuration for Atlassian DC MCP
# Copy this file to config.yaml and edit it to your needs.

# Server port (default is 8090 if not specified)
port: 8090

# Transport configuration - optimal structure for enabling multiple transports
transport:
  # List of transport modes to enable
  modes:
    - http
    - sse
    - stdio
  # HTTP transport configuration
  http:
    path: "/mcp"
  # SSE transport configuration
  sse:
    path: "/sse"
  # Stdio transport configuration
  stdio:
    enabled: true

# Client timeout in seconds (default is 60 seconds if not specified)
client_timeout: 60

# Logging configuration
logging:
  # Development mode enables human-friendly console output
  development: false
  
  # Log level (debug, info, warn, error, fatal)
  level: "info"
  
  # Log threshold in milliseconds for logging slow operations (default is 100 if not specified)
  log_threshold: 100

  # File logging configuration (optional)
  # Path to the log file (if not specified, file logging is disabled)
  file_path: "/var/log/mcp/mcp.log"
  
  # Log level for file output (if not specified, uses the same level as console)
  file_level: "debug"

jira:
  url: "https://your-jira-instance.domain"
  token: "your-jira-api-token"
  # HTTP client connection pool configuration
  http:
    # Maximum number of idle connections across all hosts (default: 100)
    max_idle_conns: 100
    # Maximum number of idle connections per host (default: 20)
    max_idle_conns_per_host: 20
    # Maximum amount of time an idle connection will remain idle before closing (default: 90 seconds)
    idle_conn_timeout: 90
  permissions:
    # Note: READ permissions are always enabled and cannot be disabled
    # Jira write permissions:
    jira_create_issue: false
    jira_update_issue: false
    jira_transition_issue: false
    jira_add_comment: false
    jira_create_subtask: false
    jira_set_issue_estimation_for_board: false
    jira_add_worklogs: false

confluence:
  url: "https://your-confluence-instance.domain"
  token: "your-confluence-api-token"
  # HTTP client connection pool configuration
  http:
    # Maximum number of idle connections across all hosts (default: 100)
    max_idle_conns: 100
    # Maximum number of idle connections per host (default: 20)
    max_idle_conns_per_host: 20
    # Maximum amount of time an idle connection will remain idle before closing (default: 90 seconds)
    idle_conn_timeout: 90
  permissions:
    # Note: READ permissions are always enabled and cannot be disabled
    # Confluence write permissions:
    confluence_create_content: false
    confluence_update_content: false
    confluence_delete_content: false
    confluence_add_comment: false

bitbucket:
  url: "https://your-bitbucket-instance.domain"
  token: "your-bitbucket-api-token"
  # HTTP client connection pool configuration
  http:
    # Maximum number of idle connections across all hosts (default: 100)
    max_idle_conns: 100
    # Maximum number of idle connections per host (default: 20)
    max_idle_conns_per_host: 20
    # Maximum amount of time an idle connection will remain idle before closing (default: 90 seconds)
    idle_conn_timeout: 90
  permissions:
    # Note: READ permissions are always enabled and cannot be disabled
    # Bitbucket write permissions:
    bitbucket_merge_pull_request: false
    bitbucket_decline_pull_request: false
    bitbucket_add_pull_request_comment: false
    bitbucket_create_attachment: false
    bitbucket_delete_attachment: false
    bitbucket_update_pull_request_status: false
    bitbucket_create_branch: false
    bitbucket_delete_branch: false
    bitbucket_create_tag: false

# Prune configuration for removing sensitive/unnecessary fields from responses
prune:
  # Fuzzy keys are prefixes for keys that should be removed
  fuzzy_keys:
    - "customfield"

  # Remove paths are exact paths or path suffixes that should be removed
  remove_paths:
    - "emailAddress"
    - "clone"
    - "locked"
    - "permittedOperations"
    - "threadResolved"
    - "avatarUrls"
    - "timeZone"
    - "thumbnail"
    - "participants"
    - "user.id"
    - "user.links"
    # - "user.name"      # Uncomment to remove user.name
    - "user.slug"
    - "user.type"
    - "_links"
    # - "links"          # Uncomment to remove links
    # - "self"           # Uncomment to remove self
    - "scmId"
    - "public"
    - "author.id"
    # - "author.name"    # Uncomment to remove author.name
    - "author.slug"
    - "author.type"
    - "author.key"
    - "author.self"
    - "author.links"
    # - "creator.name"   # Uncomment to remove creator.name
    - "creator.key"
    - "creator.self"
    # - "reporter.name"  # Uncomment to remove reporter.name
    - "reporter.key"
    - "reporter.self"
    - "updateAuthor.name"
    - "updateAuthor.key"
    - "updateAuthor.self"
    - "committer.id"
    # - "committer.name" # Uncomment to remove committer.name
    - "committer.slug"
    - "committer.type"
    - "avatarId"
    - "iconUrl"
    - "statusCategory"
    - "status.id"
    - "status.self"
    - "status.description"
    # - "type"           # Uncomment to remove type
    - "fixVersions.id"
    - "fixVersions.self"
    - "issuetype.id"
    - "issuetype.self"
    - "priority.id"
    - "priority.self"
    - "lastViewed"
    - "project.id"
    - "projectCategory"
    - "projectTypeKey"
    - "resolution.id"
    - "resolution.description"
    - "resolution.self"
    - "security"
    - "versions.id"
    - "versions.self"
    - "votes"
    - "watches"
    - "displayId"
    - "path.components"
    - "path.extension"
    - "path.name"
    - "path.parent"
    - "workratio"
    - "type.id"
    - "type.inward"
    - "type.outward"
    - "type.self"
    - "iconCssClass"
